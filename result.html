<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <title>CET Live Rank ‚Äì Result</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* (‡§Ü‡§™‡§ï‡§æ ‡§Æ‡•å‡§ú‡•Ç‡§¶‡§æ CSS ‡§Ø‡§π‡§æ‡§Å ‡§¨‡§ø‡§®‡§æ ‡§¨‡§¶‡§≤‡•á ‡§∞‡§ñ‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à) */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, sans-serif;
    }
    body {
      min-height: 100vh;
      background: #020617;
      color: #e5e7eb;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 16px;
    }
    .wrapper {
      width: 100%;
      max-width: 480px;
      margin: auto;
    }
    .card {
      background: radial-gradient(circle at top left, #1e293b, #020617 60%);
      border-radius: 16px;
      padding: 18px 16px 20px;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.25);
    }
    .title {
      font-size: 18px;
      font-weight: 700;
      color: #f9fafb;
      margin-bottom: 4px;
      text-align: center;
    }
    .subtitle {
      font-size: 12px;
      color: #9ca3af;
      text-align: center;
      margin-bottom: 12px;
    }
    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 500;
      background: rgba(15, 23, 42, 0.8);
      color: #cbd5f5;
      border: 1px solid rgba(148, 163, 184, 0.5);
    }
    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }
    .pill {
      flex: 1 1 calc(50% - 4px);
      min-width: calc(50% - 4px);
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      padding: 6px 10px;
      border: 1px solid rgba(51, 65, 85, 0.8);
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 11px;
      gap: 6px;
    }
    .pill-label {
      color: #9ca3af;
      font-size: 10px;
    }
    .pill-value {
      color: #e5e7eb;
      font-weight: 600;
      font-size: 11px;
    }
    .marks-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(59, 130, 246, 0.8);
      background: rgba(15, 23, 42, 0.9);
      font-size: 12px;
      color: #bfdbfe;
      margin-top: 8px;
    }
    .marks-chip span.score {
      font-size: 15px;
      font-weight: 700;
      color: #e5e7eb;
    }
    .social-footer {
  margin-top: 18px;
  padding: 10px 12px 14px;
  border-radius: 18px;
  border: 1px solid rgba(31, 41, 55, 0.9);
  background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.96), #020617);
  box-shadow: 0 12px 28px rgba(15, 23, 42, 0.85);
  font-size: 0.8rem;
  color: #e5e7eb;
}

.social-footer-title {
  font-size: 0.8rem;
  margin: 0 0 6px;
  color: #e5e7eb;
  font-weight: 600;
}

.social-footer-sub {
  margin: 0 0 10px;
  font-size: 0.7rem;
  color: #9ca3af;
}

.social-footer-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.social-pill {
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(75, 85, 99, 0.9);
  font-size: 0.78rem;
  font-weight: 500;
  background: rgba(15, 23, 42, 0.95);
  color: #e5e7eb;
}

.social-pill img {
  width: 18px;
  height: 18px;
  border-radius: 4px;
}

/* Alag-alag brand ke ‡§π‡§≤‡•ç‡§ï‡•á ‡§∞‡§Ç‡§ó */
.social-pill.insta {
  border-color: rgba(250, 204, 21, 0.8);
  background: rgba(250, 204, 21, 0.14);
}

.social-pill.wh {
  border-color: rgba(34, 197, 94, 0.85);
  background: rgba(34, 197, 94, 0.16);
}

.social-pill.tg {
  border-color: rgba(56, 189, 248, 0.85);
  background: rgba(56, 189, 248, 0.16);
}

.social-pill.yt {
  border-color: rgba(248, 113, 113, 0.9);
  background: rgba(248, 113, 113, 0.18);
}

.social-pill.web {
  border-color: rgba(129, 140, 248, 0.9);
  background: rgba(129, 140, 248, 0.18);
}

    .section-title {
      font-size: 13px;
      font-weight: 600;
      color: #e5e7eb;
      margin-top: 14px;
      margin-bottom: 6px;
    }
    .ranks-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 6px;
    }
    .rank-card {
      background: rgba(15, 23, 42, 0.95);
      border-radius: 12px;
      padding: 8px 9px;
      border: 1px solid rgba(51, 65, 85, 0.9);
    }
    .rank-label {
      font-size: 11px;
      color: #9ca3af;
      margin-bottom: 2px;
    }
    .rank-value {
      font-size: 18px;
      font-weight: 700;
      color: #facc15;
    }
    .rank-subtext {
      font-size: 10px;
      color: #9ca3af;
      margin-top: 1px;
    }
    .error {
      margin-top: 10px;
      font-size: 12px;
      color: #fecaca;
      background: rgba(127, 29, 29, 0.4);
      border-radius: 10px;
      padding: 8px 10px;
      border: 1px solid rgba(248, 113, 113, 0.7);
    }
    .info {
      margin-top: 10px;
      font-size: 11px;
      color: #9ca3af;
      text-align: center;
    }
    .footer {
      margin-top: 10px;
      font-size: 10px;
      color: #6b7280;
      text-align: center;
    }
    .footer span {
      color: #9ca3af;
    }
    .refresh-btn {
      width: 100%;
      margin-top: 10px;
      padding: 10px 16px;
      border-radius: 999px;
      border: none;
      outline: none;
      background: linear-gradient(90deg, #2563eb, #4f46e5);
      color: #f9fafb;
      font-size: 14px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.45);
      cursor: pointer;
    }
    .refresh-btn:disabled {
      opacity: 0.7;
      cursor: default;
      box-shadow: none;
    }
    .small-text {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 6px;
      text-align: center;
    }
    .roll-input-wrap {
      margin-top: 8px;
      display: flex;
      gap: 6px;
    }
    .roll-input {
      flex: 1;
      border-radius: 999px;
      padding: 7px 10px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      font-size: 12px;
      outline: none;
    }
    .roll-go-btn {
      border-radius: 999px;
      padding: 7px 12px;
      border: none;
      background: #16a34a;
      color: #f9fafb;
      font-size: 12px;
      font-weight: 600;
    }
  </style>
</head>

<!-- ===== TOP NAV HEADER (SAFE ADD) ===== -->
<style>
  .topnav{position:sticky;top:0;z-index:999;background:#020617;border-bottom:1px solid #1f2937}
  .topnav .wrap{max-width:1100px;margin:auto;display:flex;align-items:center;justify-content:space-between;padding:10px 12px}
  .brand{font-weight:700;font-size:16px}
  .navlinks{display:flex;gap:12px}
  .navlinks a{color:#cbd5f5;font-size:14px;padding:6px 8px;border-radius:6px;text-decoration:none}
  .navlinks a:hover{background:#071027;color:#38bdf8}
  .hamburger{display:none;font-size:22px;cursor:pointer}
  @media(max-width:768px){
    .navlinks{display:none;flex-direction:column;position:absolute;left:0;top:54px;width:100%;background:#020617;border-top:1px solid #1f2937}
    .navlinks.show{display:flex}
    .hamburger{display:block}
  }
</style>

<div class="topnav">
  <div class="wrap">
    <div class="brand">CET Ranker</div>
    <div class="hamburger" onclick="document.getElementById('navlinks').classList.toggle('show')">‚ò∞</div>
    <div class="navlinks" id="navlinks">
      <a href="index.html">Home</a>
      <a href="search.html">Search</a>
      <a href="cutoff.html">Mains Cutoff</a>
      <a href="study-material.html">Study Material</a>
      <a href="about.html">About Us</a>
      <a href="contact.html">Contact</a>
      <a href="privacy-policy.html">Privacy Policy</a>
      <a href="terms.html">Terms</a>
    </div>
  </div>
</div>
<!-- ===== END HEADER ===== -->
  <!-- Ad: Header Below -->
<ins class="adsbygoogle"
     style="display:block;margin:12px auto;max-width:480px"
     data-ad-client="ca-pub-5796812772059815"
     data-ad-slot="111111"
     data-ad-format="auto"></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  
<body>
  <div class="wrapper">
    <div class="card">
      <div class="title">HSSC CET (Group C) ‚Äì Live Rank</div>
      <div class="subtitle">PDF upload ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ü‡§™‡§ï‡§æ result ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ</div>

      <div style="text-align:center; margin-bottom:8px;">
        <span class="badge" id="rollBadge">Roll: --</span>
      </div>

      <!-- Roll manual input (‡§Ö‡§ó‡§∞ URL ‡§∏‡•á ‡§®‡§æ ‡§Æ‡§ø‡§≤‡•á) -->
      <div id="rollInputBox" style="display:none;">
        <div class="small-text">
             ‡§Ö‡§ó‡§∞ ‡§ä‡§™‡§∞ URL ‡§∏‡•á roll ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§Ø‡§æ ‡§π‡•à, ‡§§‡•ã ‡§®‡•Ä‡§ö‡•á ‡§Ö‡§™‡§®‡§æ roll ‡§≠‡§∞‡•á‡§Ç:
        </div>
        <div class="roll-input-wrap">
          <input id="rollInput" class="roll-input" placeholder="‡§Ö‡§™‡§®‡§æ Roll number ‡§≤‡§ø‡§ñ‡•á‡§Ç" />
          <button class="roll-go-btn" id="rollGoBtn">Go</button>
        </div>
      </div>

      <div class="section-title">‡§â‡§Æ‡•ç‡§Æ‡•Ä‡§¶‡§µ‡§æ‡§∞ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</div>
      <div class="row">
        <div class="pill">
          <div class="pill-label">‡§®‡§æ‡§Æ</div>
          <div class="pill-value" id="nameText">--</div>
        </div>
        <div class="pill">
          <div class="pill-label">Category</div>
          <div class="pill-value" id="catText">--</div>
        </div>
        <div class="pill">
          <div class="pill-label">Gender</div>
          <div class="pill-value" id="genderText">--</div>
        </div>
        <div class="pill">
          <div class="pill-label">D.O.B</div>
          <div class="pill-value" id="dobText">--</div>
        </div>
        <div class="pill">
          <div class="pill-label">Exam Date</div>
          <div class="pill-value" id="examDateText">--</div>
        </div>
      </div>

      <div class="marks-chip">
        <span>Marks</span>
        <span class="score" id="marksText">--</span>
      </div>

      <div class="section-title">Rank Detail</div>
      <div class="ranks-grid">
        <div class="rank-card">
          <div class="rank-label">Overall Rank</div>
          <div class="rank-value" id="overallRankText">--</div>
          <div class="rank-subtext">‡§∏‡§≠‡•Ä candidates ‡§Æ‡•á‡§Ç</div>
        </div>
        <div class="rank-card">
          <div class="rank-label">Category Rank</div>
          <div class="rank-value" id="catRankText">--</div>
          <div class="rank-subtext">‡§Ü‡§™‡§ï‡•Ä category ‡§Æ‡•á‡§Ç</div>
        </div>
      </div>

      <button class="refresh-btn" id="refreshBtn">
        <span>üîÑ Refresh Rank</span>
      </button>

      <button
  id="cutoffBtn"
  style="
    width:100%;
    margin-top:10px;
    padding:10px 16px;
    border:none;
    border-radius:999px;
    background:linear-gradient(90deg,#059669,#16a34a);
    color:white;
    font-size:14px;
    font-weight:600;
    cursor:pointer;
  ">
  üìä Cutoff ‡§¶‡•á‡§ñ‡•á‡§Ç (Vacancy-wise)
</button>

      <div id="errorBox" class="error" style="display:none;"></div>

      <div class="info" id="infoText">‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§π‡•ã‡§®‡•á ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ...</div>
<!-- üîªüîªüîª  ‡§Ø‡§π‡§æ‡§Å Disclaimer Paste ‡§ï‡§∞‡•á‡§Ç  üîªüîªüîª -->
<div class="section" 
     style="margin-top:18px; padding:14px; background:rgba(15,23,42,0.7); 
            border-radius:12px; border:1px solid rgba(148,163,184,0.2); 
            font-size:12px; line-height:1.5; color:#e5e7eb;">
    
    <h2 style="font-size:14px; margin-bottom:6px; color:#facc15;">
        ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•Ç‡§ö‡§®‡§æ (Disclaimer)
    </h2>
    ‡§Ø‡§π <b>‡§ï‡•ã‡§à ‡§Ü‡§ß‡§ø‡§ï‡§æ‡§∞‡§ø‡§ï ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§®‡§π‡•Ä‡§Ç</b> ‡§π‡•à ‡§î‡§∞ ‡§® ‡§π‡•Ä ‡§Ø‡§π HSSC ‡§Ø‡§æ ‡§ï‡§ø‡§∏‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•Ä ‡§π‡•Å‡§à ‡§π‡•à‡•§  
    ‡§Ø‡§π ‡§ï‡•á‡§µ‡§≤ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ <b>Unofficial Rank Calculator</b> ‡§π‡•à‡•§

    <h2 style="margin-top:12px; font-size:14px; color:#facc15;">
        Terms &amp; Conditions (‡§∂‡§∞‡•ç‡§§‡•á‡§Ç)
    </h2>
    <ul style="margin-left:15px; margin-top:6px;">
      <li>‡§Ü‡§™ ‡§ú‡•ã ‡§≠‡•Ä PDF ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§µ‡§π ‡§ï‡•á‡§µ‡§≤ ‡§∞‡•à‡§Ç‡§ï ‡§®‡§ø‡§ï‡§æ‡§≤‡§®‡•á ‡§ï‡•á ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø ‡§∏‡•á ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§</li>
      <li>‡§Ü‡§™‡§ï‡§æ ‡§°‡•á‡§ü‡§æ ‡§ï‡§ø‡§∏‡•Ä ‡§§‡•Ä‡§∏‡§∞‡•á ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§ï‡•ã ‡§∂‡•á‡§Ø‡§∞, ‡§¨‡•á‡§ö‡§æ ‡§Ø‡§æ ‡§ó‡§≤‡§§ ‡§§‡§∞‡•Ä‡§ï‡•á ‡§∏‡•á ‡§â‡§™‡§Ø‡•ã‡§ó ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ‡•§</li>
      <li>‡§∞‡•à‡§Ç‡§ï ‡§ï‡§æ calculation official ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, ‡§Ø‡§π user-submitted ‡§°‡•á‡§ü‡§æ ‡§™‡§∞ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§π‡•à‡•§</li>
      <li>‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§§‡§∞‡§π ‡§ï‡•Ä Official Merit List ‡§Ø‡§æ Final Decision ‡§π‡§Æ‡•á‡§∂‡§æ HSSC ‡§ï‡•á official result ‡§™‡§∞ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§π‡•ã‡§ó‡§æ‡•§</li>
      <li>‡§á‡§∏ ‡§ü‡•Ç‡§≤ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§§‡•á ‡§∏‡§Æ‡§Ø ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§ó‡§≤‡§§‡§´‡§π‡§Æ‡•Ä ‡§Ø‡§æ ‡§®‡•Å‡§ï‡§∏‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è developer ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§ó‡§æ‡•§</li>
    </ul>
</div>

<!-- üî∫üî∫üî∫  Disclaimer Section Ends  üî∫üî∫üî∫ -->
<!-- SOCIAL FOOTER: Instagram + WhatsApp + (future) Telegram / YouTube / Website -->
      <div class="social-footer">
        <p class="social-footer-title">
          CET updates, cutoff analysis, PDFs & notifications ‡§è‡§ï ‡§ú‡§ó‡§π:
        </p>
        <p class="social-footer-sub">
          Instagram ‡§™‡§∞ reels/analysis, WhatsApp & Telegram ‡§™‡§∞ instant notification,
          YouTube ‡§™‡§∞ detailed videos, ‡§î‡§∞ website ‡§™‡§∞ ‡§™‡•Ç‡§∞‡§æ material ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ‡•§
        </p>

        <div class="social-footer-row">
          <!-- Instagram -->
          <a
            href="https://instagram.com/adv_kanha73"
            target="_blank"
            class="social-pill insta"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png"
              alt="Instagram"
            />
            <span>Instagram ¬∑ @adv_kanha73</span>
          </a>

          <!-- WhatsApp Channel -->
          <a
            href="https://whatsapp.com/channel/0029Vb6kNhq8fewpVWfe1m1s"
            target="_blank"
            class="social-pill wh"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg"
              alt="WhatsApp"
            />
            <span>WhatsApp Channel</span>
          </a>

          <!-- Telegram (baad me apna link daal dena) -->
          <a
            href="https://t.me/cetranker"
            target="_blank"
            class="social-pill tg"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg"
              alt="Telegram"
            />
            <span>Telegram Channel</span>
          </a>

          <!-- YouTube (baad me change karna) -->
          <a
            href="https://youtube.com/@cetranker"
            target="_blank"
            class="social-pill yt"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg"
              alt="YouTube"
            />
            <span>YouTube Channel</span>
          </a>

          <!-- Website (jab bhi ready ho) -->
          <a
            href="https://your-website-url.com"
            target="_blank"
            class="social-pill web"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/e/e0/OOjs_UI_icon_globe-progressive.svg"
              alt="Website"
            />
            <span>Official Website</span>
          </a>
        </div>
      </div>
    </div> <!-- .wrapper end -->
    

      <div class="footer" id="footerInfo">
        <span>Total Candidates:</span> <span id="totalCandText">--</span> ¬∑
        <span>Last update:</span> <span id="rankTimeText">--</span>
      </div>
    </div>
  </div>

  <script>
    // ‚¨á‚¨á‚¨á ‡§Ø‡§π‡§æ‡§Ç ‡§Ö‡§™‡§®‡§æ Apps Script Web App URL ‡§°‡§æ‡§≤‡•á‡§Ç (‡§ú‡•ã /exec ‡§∏‡•á ‡§ñ‡§§‡•ç‡§Æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à) ‚¨á‚¨á‚¨á
    const BACKEND_URL =
      "https://script.google.com/macros/s/AKfycbwHo7ecIYJP-ekEOfsCnD1BUtbSJ_nF6ZNZ2vi_hsQb6fyA0GBurHQTxWbPrm0DKZzOIQ/exec";

    /***********************
     * Simple toggle setting
     *
     * CHANGE THIS VALUE to control behavior:
     *
     *  - false => ‡§ï‡•á‡§µ‡§≤ WhatsApp ‡§ñ‡•Å‡§≤‡•á‡§ó‡§æ (cutoff.html ‡§®‡§π‡•Ä‡§Ç ‡§ñ‡•Å‡§≤‡•á‡§ó‡§æ)
     *  - true  => WhatsApp ‡§ñ‡•Å‡§≤‡•á‡§ó‡§æ ‡§î‡§∞ 700ms ‡§¨‡§æ‡§¶ cutoff.html ‡§≠‡•Ä ‡§ñ‡•Å‡§≤‡•á‡§ó‡§æ
     *
     * ‡§¨‡§∏ ‡§®‡•Ä‡§ö‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§≤‡§æ‡§á‡§® ‡§Æ‡•á‡§Ç true/false set ‡§ï‡§∞ ‡§¶‡•á‡§Ç ‡§ú‡§¨ ‡§≠‡•Ä ‡§¨‡§¶‡§≤‡§®‡§æ ‡§π‡•ã‡•§
     ***********************/
    const ENABLE_CUTOFF = false; // <-- ‡§Ø‡§π‡§æ‡§Å true ‡§Ø‡§æ false ‡§°‡§æ‡§≤‡•á‡§Ç

    // ---------------------------------------
    // Rank load function (unchanged)
    // ---------------------------------------
    function openWhatsAppThenLoad(roll) {
      try {
        window.open(
          "https://whatsapp.com/channel/0029Vb6kNhq8fewpVWfe1m1s",
          "_blank"
        );
      } catch (e) {
        console.log("Popup blocked:", e);
      }

      // ‡§•‡•ã‡§°‡§º‡•á delay ‡§ï‡•á ‡§¨‡§æ‡§¶ rank load
      setTimeout(() => {
        fetchLiveRank(roll);
      }, 700);
    }

    // ---------------------------------------
    // Unified handler for Cutoff button (respects ENABLE_CUTOFF)
    // ---------------------------------------
    function handleCutoffButtonClick() {
      try {
        window.open("https://whatsapp.com/channel/0029Vb6kNhq8fewpVWfe1m1s", "_blank");
      } catch (e) {
        console.log("WhatsApp open blocked:", e);
      }

      if (ENABLE_CUTOFF) {
        setTimeout(() => {
          window.location.href = "cutoff.html";
        }, 700);
      }
    }

    // ---------------------------------------
    // Helpers & Rank fetch logic (kept & fixed)
    // ---------------------------------------
    function getQueryParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    function showError(msg) {
      const box = document.getElementById("errorBox");
      box.textContent = msg;
      box.style.display = "block";
      const info = document.getElementById("infoText");
      if (info) info.textContent = "Error ‡§Ü‡§Ø‡§æ, ‡§ä‡§™‡§∞ message ‡§¶‡•á‡§ñ‡•á‡§Ç‡•§";
    }

    function clearError() {
      const box = document.getElementById("errorBox");
      box.style.display = "none";
      box.textContent = "";
    }

    async function fetchLiveRank(customRoll) {
      try {
        clearError();

        let roll = customRoll || getQueryParam("roll");
        const rollInputEl = document.getElementById("rollInput");

        if (!roll) {
          // ‡§Ö‡§ó‡§∞ URL ‡§∏‡•á roll ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, ‡§§‡•ã input ‡§∏‡•á ‡§≤‡•á‡§Ç
          if (rollInputEl && rollInputEl.value.trim()) {
            roll = rollInputEl.value.trim();
          }
        }

        if (!roll) {
          const info = document.getElementById("infoText");
          if (info) info.textContent =
            "‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ roll number ‡§≠‡§∞‡•á‡§Ç ‡§î‡§∞ Refresh Rank ‡§¶‡§¨‡§æ‡§è‡§Å‡•§";
          document.getElementById("rollInputBox").style.display = "block";
          return;
        }

        // ‡§∏‡§π‡•Ä show/hide logic: ‡§Ö‡§ó‡§∞ URL ‡§Æ‡•á‡§Ç roll ‡§π‡•à ‡§§‡•ã input ‡§õ‡•Å‡§™‡§æ‡§ì
        if (getQueryParam("roll")) {
          document.getElementById("rollInputBox").style.display = "none";
        } else {
          document.getElementById("rollInputBox").style.display = "block";
        }

        document.getElementById("rollBadge").textContent = "Roll: " + roll;
        document.getElementById("infoText").textContent = "Rank data load ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...";
        const btn = document.getElementById("refreshBtn");
        btn.disabled = true;
        btn.innerHTML = "‚è≥ Loading...";

        const url = BACKEND_URL + "?roll=" + encodeURIComponent(roll);

        const res = await fetch(url, { cache: "no-store" });
        if (!res.ok) {
          throw new Error("HTTP " + res.status);
        }

        const data = await res.json();

        if (data.error) {
          showError(data.error);
          document.getElementById("infoText").textContent = "‡§ï‡•É‡§™‡§Ø‡§æ roll number ‡§Ø‡§æ ‡§°‡•á‡§ü‡§æ ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§";
          return;
        }

        const u = data.user || {};
        const r = data.ranks || {};
        const stats = data.stats || {};

        document.getElementById("nameText").textContent = u.name || "--";
        document.getElementById("catText").textContent = u.category || "--";
        document.getElementById("genderText").textContent = u.gender || "--";
        document.getElementById("dobText").textContent = u.dob || "--";
        document.getElementById("examDateText").textContent = u.exam_date || "--";
        document.getElementById("marksText").textContent =
          u.cet_marks != null ? u.cet_marks : "--";

        document.getElementById("overallRankText").textContent =
          r.overallRank != null && r.overallRank !== "--" ? r.overallRank : "--";
        document.getElementById("catRankText").textContent =
          r.categoryRank != null && r.categoryRank !== "--" ? r.categoryRank : "--";

        document.getElementById("totalCandText").textContent =
          stats.totalCandidates != null ? stats.totalCandidates : "--";

        if (data.rankTime) {
          try {
            const dt = new Date(data.rankTime);
            const formatted =
              dt.toLocaleDateString("hi-IN") +
              " " +
              dt.toLocaleTimeString("hi-IN", {
                hour: "2-digit",
                minute: "2-digit",
              });
            document.getElementById("rankTimeText").textContent = formatted;
          } catch (e) {
            document.getElementById("rankTimeText").textContent = data.rankTime;
          }
        } else {
          document.getElementById("rankTimeText").textContent = "--";
        }

        document.getElementById("infoText").textContent =
          "Rank ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï load ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§";
      } catch (err) {
        console.log(err);
        showError("Network error / Backend issue. ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§¶‡•Å‡§¨‡§æ‡§∞‡§æ ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§");
      } finally {
        const btn = document.getElementById("refreshBtn");
        if (btn) {
          btn.disabled = false;
          btn.innerHTML = "üîÑ Refresh Rank";
        }
      }
    }

    // ---------- Event wiring ----------
    document.addEventListener("DOMContentLoaded", () => {
      // Wire cutoff button
      const cutoffBtn = document.getElementById("cutoffBtn");
      if (cutoffBtn) cutoffBtn.addEventListener("click", handleCutoffButtonClick);

      // Wire refresh button
      const refreshBtn = document.getElementById("refreshBtn");
      if (refreshBtn) {
        refreshBtn.addEventListener("click", () => {
          const roll = getQueryParam("roll") || document.getElementById("rollInput").value.trim();
          openWhatsAppThenLoad(roll);
        });
      }

      // Wire Go button for manual roll
      const goBtn = document.getElementById("rollGoBtn");
      if (goBtn) {
        goBtn.addEventListener("click", () => {
          const roll = document.getElementById("rollInput").value.trim();
          if (!roll) {
            showError("‡§ï‡•É‡§™‡§Ø‡§æ roll number ‡§≠‡§∞‡•á‡§Ç‡•§");
            return;
          }
          clearError();
          const params = new URLSearchParams(window.location.search);
          params.set("roll", roll);
          const newUrl = window.location.pathname + "?" + params.toString() + window.location.hash;
          window.history.replaceState({}, "", newUrl);
          openWhatsAppThenLoad(roll);
        });
      }

      // On initial page load, auto-load if roll provided
      const rollFromUrl = getQueryParam("roll");
      if (rollFromUrl) {
        document.getElementById("rollInputBox").style.display = "none";
        fetchLiveRank(rollFromUrl);
      } else {
        document.getElementById("rollInputBox").style.display = "block";
        document.getElementById("infoText").textContent =
          "Roll URL ‡§∏‡•á ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ roll ‡§≠‡§∞‡§ï‡§∞ Refresh Rank ‡§¶‡§¨‡§æ‡§è‡§Å‡•§";
      }
    });

  </script>
</body>
</html>
